<div class="center-content h-100 p-4">
    <mat-card matDialogContent>
        <mat-card-header >
            <span matDialogActions (click)="closeDialog()" class="ml-auto btn pt-0 mb-0">
                <mat-icon>close</mat-icon>
            </span>
            <mat-card-title class="text-primary text-center">Add User</mat-card-title>
        </mat-card-header>
        <!--<img matCardImage src="Card wide image source">-->
        <mat-card-content class="d-flex justify-content-center">
            <form #f="ngForm" (ngSubmit)="register()">
                <div>
                    <mat-form-field class="form-width">
                        <mat-icon ngClass="pr-3" matPrefix class="pr-2">account_circle</mat-icon>
                        <input class="custom-input" name="name" [type]="text" placeholder="Enter Your Name"
                               #name="ngModel" required ngModel matInput>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="form-width">
                        <input class="custom-input" #secretWord="ngModel" name="secretWord" [type]="text"
                               placeholder="Enter Your Secret Word" required ngModel matInput>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="form-width">
                        <input class="custom-input" matInput [matDatepicker]="picker" placeholder="Choose Birthday"
                               required #date="ngModel" name="date" ngModel>
                        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker startView="year" [startAt]="startDate"></mat-datepicker>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field class="form-width">
                        <mat-select value="" placeholder="Select List Type" name="type" required #type="ngModel"
                                    [required]="true" ngModel>
                            <mat-option *ngFor="let type of LIST_TYPES" [value]="type.value">{{type.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                </div>
                <div>
                    <button [disabled]="f.controls.name.invalid"  class="btn-primary btn" (click)="showUpload=!showUpload">Upload Images</button>
                </div>
                <div *ngIf="showUpload && f.controls.name.valid " class="mt-3">
                    <mat-progress-bar *ngIf="isUploadStarted" [value]="fileProgress" class="mb-2"> </mat-progress-bar>
                    <p-fileUpload multiple="true" name="file" [url]="getUploadUrl()" accept="image/*" #fileUploader (onProgress)="uploadProgress($event)">
                        <ng-template let-file let-i="index" pTemplate='file'>
                            <mat-progress-bar [value]="fileUploader.progress" *ngIf="i==0"></mat-progress-bar>
                            <div>
                                <img [src]="file.objectURL" [width]="70"/>
                                <span>{{file.name}}</span>
                                <span class="btn ml-auto" (click)="removeFile(i)">
                                    <mat-icon>cancel</mat-icon>
                                </span>
                            </div>
                        </ng-template>
                    </p-fileUpload>
                </div>
                <mat-card-actions class="text-center">
                    <button class="btn btn-primary" type="submit" [disabled]="f.invalid">Register</button>
                </mat-card-actions>
            </form>
        </mat-card-content>
        <mat-card-footer>
        </mat-card-footer>
    </mat-card>
</div>
